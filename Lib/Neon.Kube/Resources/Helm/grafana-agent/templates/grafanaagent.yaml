apiVersion: monitoring.grafana.com/v1alpha1
kind: GrafanaAgent
metadata:
  name: grafana-agent
  namespace: neon-monitor
  labels:
    app: grafana-agent
spec:
  image: "{{ .Values.agent.image.organization }}/{{ .Values.agent.image.repository }}:{{ .Values.agentimage.tag }}"
  imagePullPolicy: {{ .Values.agent.image.pullPolicy | default "IfNotPresent" }}
  logLevel: info
  logFormat: json
  serviceAccountName: grafana-agent
  prometheus:
    shards: {{ .Values.shards }}
    instanceSelector:
      matchLabels:
        agent: grafana-agent